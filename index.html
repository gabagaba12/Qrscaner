<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>HoleOut - Escáner de Membresía</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
</head>
<body>

  <header>
    <img src="https://holeout.mx/wp-content/uploads/2024/02/logo-white.svg" alt="LOGO aqui" class="logo" />
    <h1>Escanear Membresía</h1>
  </header>

  <main>
    <div id="reader"></div>

    <div id="infoCliente">
      <h2>Información del cliente</h2>
      <div class="dato"><strong>Nombre:</strong> <span id="nombre"></span></div>
      <div class="dato"><strong>Apellido:</strong> <span id="apellido"></span></div>
      <div class="dato"><strong>Fecha de nacimiento:</strong> <span id="nacimiento"></span></div>
      <div class="dato"><strong>Correo:</strong> <span id="correo"></span></div>
      <div class="dato"><strong>Teléfono:</strong> <span id="telefono"></span></div>
      <button onclick="reiniciarEscaneo()">Escanear otro</button>
    </div>
  </main>

  <footer>

  </p>mvp :)
  </footer>

  <script>
    const clientes = {
      "0YkosQFW7vSnnhUHBBtZ1t": {
        nombre: "Oscar",
        apellido: "Sierra",
        nacimiento: "01/12/2001",
        correo: "osierra@k1speed.mx",
        telefono: "+52 55 1069 7445"
      },
      "39I7J02UGr6ICxUSE0oWCB": {
        nombre: "Alfonso",
        apellido: "Paredes",
        nacimiento: "17/06/1988",
        correo: "aparedes@k1speed.mx",
        telefono: "+52 55 7445 1842"
      }
    };

    const qrScanner = new Html5Qrcode("reader");

    function mostrarCliente(id) {
      const cliente = clientes[id];
      if (cliente) {
        document.getElementById("nombre").textContent = cliente.nombre;
        document.getElementById("apellido").textContent = cliente.apellido;
        document.getElementById("nacimiento").textContent = cliente.nacimiento;
        document.getElementById("correo").textContent = cliente.correo;
        document.getElementById("telefono").textContent = cliente.telefono;
        document.getElementById("infoCliente").style.display = "block";
        document.getElementById("reader").style.display = "none";
      } else {
        alert("Cliente no encontrado");
      }
    }

    function reiniciarEscaneo() {
      document.getElementById("infoCliente").style.display = "none";
      document.getElementById("reader").style.display = "block";
      qrScanner.start(
        { facingMode: "environment" },
        { fps: 10, qrbox: 250 },
        (decodedText) => {
          qrScanner.stop();
          mostrarCliente(decodedText.trim());
        }
      );
    }

    qrScanner.start(
      { facingMode: "environment" },
      { fps: 10, qrbox: 250 },
      (decodedText) => {
        qrScanner.stop();
        mostrarCliente(decodedText.trim());
      }
    );
  </script>
</body>
</html>
